---
layout: splash
title: 2. Kubernetes & Istio ì„¤ì¹˜ ë° ì‹œì‘í•´ë³´ê¸° (2.1 Kubernetes ì„¤ì¹˜ ê°€ì´ë“œ))
date: 2019-03-03 08:26:28 -0400
categories: istio
tags: [istio, install]
---

# 2. Kubernetes & Istio ì„¤ì¹˜ ë° ì‹œì‘í•´ë³´ê¸°
Istio ì˜ Service Meshë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Kubernetes, Kubectl, Helmì™€ ê°™ì€ ë‹¤ì–‘í•œ ê°œë°œ, í…ŒìŠ¤íŠ¸ í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.

KubernetesëŠ” **sidecar-deployment** ë°°í¬ ê°œë…ì„ ê¸°ë³¸ìœ¼ë¡œí•˜ëŠ” Istioë¥¼ ì ìš©í•˜ê¸°ì— ìµœì ì˜ ê³µê°„ì…ë‹ˆë‹¤. Kubernetes ë¥¼ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  ë™ì‘ì‹œí‚¬ì§€ëŠ” í˜„ì¬ ë³´ìœ í•˜ê³  ìˆëŠ” ì¸í”„ë¼ ìì›ì˜ ìƒí™©ì— ë”°ë¼ ìœ ì—°ì„±ì„ ê°€ì§€ê³  ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œë°œìê°€ ê°€ì§€ê³  ìˆëŠ” ë…¸íŠ¸ë¶ì—ì„œë¶€í„° í¼ë¸”ë¦­ í´ë¼ìš°ë“œ ì‚¬ì—…ìê°€ ì œê³µí•˜ëŠ” Managed Service (AWS(EKS), Azure(AKS), GCP(Kubernetes Engine) ë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆê³ , ë² ì–´ë©”íƒˆ ì„œë²„ì— ë‚˜ë§Œì˜ Kubernetes í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ì¥ì—ì„œëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•´ [Minikube](https://kubernetes.io/ko/docs/tasks/xtools/install-minikube/) ì™€ [Kubectl]() ì„¤ì¹˜ ë°©ë²•ê³¼ Kubernetes í´ëŸ¬ìŠ¤í„°ì— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì˜ˆì œ ì• í”Œë¦¬ì¼€ì´ì…˜ Bookinfoë¥¼ ë°°í¬í•˜ì—¬ Istioë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê°„ íŠ¸ë˜í”½ ì»¨íŠ¸ë¡¤, ì„œë¹„ìŠ¤ ì œì–´, ë³´ì•ˆ, ì •ì±…, ëª¨ë‹ˆí„°ë§ ë“± ì£¼ìš” ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í™˜ê²½ êµ¬ì¶• ë°©ë²™ì— ëŒ€í•´ ìì„¸íˆ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.

- 2.1 Kubernetes(Minikube) ì„¤ì¹˜
  - 2.1.1 Minikube íŠ¹ì§•
  - 2.1.2 Minikube ì„¤ì¹˜ ê°€ì´ë“œ
  - 2.1.3 Minikube ë¹ ë¥¸ ì‹œì‘
- 2.2 Istio ì„¤ì¹˜ ê°€ì´ë“œ
- 2.3 Bookinfo MSA(Micro Service Architecture) ì†Œê°œ

## 2.1 Kubernetes(Minikube) ì„¤ì¹˜
Istio í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½ì„ ìœ„í•´ Minikubeë¥¼ ì´ìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.
Minikube íŠ¹ì§•ì— ëŒ€í•´ ê°„ë‹¨íˆ ì†Œê°œí•˜ê³ , í…ŒìŠ¤íŠ¸/ê°œë°œì„ ìœ„í•´ ì§ì ‘ Minikubeë¥¼ ë‹¤í–¥í•œ í”Œë˜í¼ ê´€ê²½ì—ì„œ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•©ë‹ˆë‹¤. Mikubeë¥¼ ì„¤ì¹˜í•œ ì´í›„ì—ëŠ” kubectl ë„êµ¬ë¥¼ ì´ìš©í•˜ì—¬ Minikubeì™€ ìƒí˜¸ í†µì‹ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•©ë‹ˆë‹¤.

### 2.1.1 Minikube íŠ¹ì§•
minikube ëŠ” ë‹¤ìŒê³¼ ê°™ì€ kubernetes ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹ˆë‹¤.
- DNS
- NodePort
- Config Map & Secret
- Dashboard
- Container Runtime: Docker, rkt, CRIO-O, containerd
- CNI (Container Network Interface) ì‚¬ìš©
- Ingress

##### DNS
KubernetesëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ DNS(Kube-DNS)ë¥¼ Add-On í˜•íƒœë¡œ ì œê³µí•©ë‹ˆë‹¤. DNS ì„œë¹„ìŠ¤ë¥¼ í†µí•´ì„œ Pod ê°„ í†µì‹ í• ë•Œ IP ì£¼ì†Œê°€ ì•„ë‹ˆë¼ ë„ë©”ì¸ì„ ì„¤ì •í•˜ì—¬ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. íŠ¹íˆ DNS ì„œë¹„ìŠ¤ëŠ” í´ëŸ¬ìŠ¤í„°ì— ìƒˆë¡œìš´ ì„œë¡œìš´ ì„œë¹„ìŠ¤ê°€ ë°°í¬ë  ê²½ìš° ì„œë¹„ìŠ¤ ê°„ íƒìƒ‰ ë° í†µì‹ í•˜ê¸° ìœ„í•œ Service Discovery ê¸°ëŠ¥ì„ ìœ„í•œ ìš©ë„ë¡œ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

##### Node Port
KubernetesëŠ” IP ì£¼ì†Œ í• ë‹¹ ë°©ì‹ì™€ ì—°ë™ ì„œë¹„ìŠ¤ ë“±ì— ë”°ë¼ Cluser IP, Node Port, LoadBalancer, ExternalName 4ê°€ì§€ ì„œë¹„ìŠ¤ íƒ€ì…ì„ ì œê³µí•©ë‹ˆë‹¤.
MinikubeëŠ” ì´ ì¤‘ [NodePort](https://kubernetes.io/docs/concepts/services-networking/service/) ì„œë¹„ìŠ¤ íƒ€ì…ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° ë‚´/ì™¸ë¶€ì—ì„œ Pod ì ‘ì†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

##### Config Map
Config Map ì€ ì»¨í…Œì´ë„ˆì—ì„œ í•„ìš”í•œ í™˜ê²½ì„¤ì • ê°’ì„ ì»¨í…Œì´ë„ˆì™€ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆì˜ ê¸°ë³¸ ê°œë…ì€ Immutable Infrastructure íŒ¨ëŸ¬ë‹¤ì„ì„ ë”°ë¦…ë‹ˆë‹¤.
Immutable Infrastructure ëŠ” í˜¸ìŠ¤íŠ¸ OSì™€ ì„œë¹„ìŠ¤ ìš´ì˜í™˜ê²½ (ì„œë²„ í”„ë¡œê·¸ë¨, ì†ŒìŠ¤ ì½”ë“œ, ì»´íŒŒì¼ëœ ë°”ì´ë„ˆë¦¬)ì„ ë¶„ë¦¬í•˜ê³ , í•œë²ˆ ì„¤ì •í•œ ìš´ì˜ í™˜ê²½ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤(Immutable)ëŠ” ê°œë…ì…ë‹ˆë‹¤. ê°œë°œí™˜ê²½ì—ì„œ ë°°í¬í•˜ê¸° ì „ë‹¨ê³„ì˜ ì»¨í…Œì´ë„ˆì™€ Kuernetesì— ë°°í¬ëœ ì»¨í…Œì´ë„ˆê°€ ë™ì¼í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì•¼ë§Œ Dev, Staging, Production ê° ë‹¨ê³„ë³„ë¡œ ê°œë°œ/ì„œë¹„ìŠ¤ í™˜ê²½ì˜ ì°¨ì´ì—ì„œ ì˜¤ëŠ” ì ì¬ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì‚¬ìš© ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ì—¬ëŸ¬ ì„¤ì •ì„ ë³€ê²½í•˜ì—¬ ìš´ì˜í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ DB ì£¼ì†Œë¥¼ ë°”ê¿”ì•¼ í•  ìˆ˜ë„ ìˆê³ , ë””ë²„ê¹…ì„ ìœ„í•´ ë¡œê·¸ë ˆë²¨ì„ INFO ì—ì„œ DEBUG ë ˆë²¨ë¡œ ë³€ê²½í•˜ì—¬ ë¶„ì„í•´ì•¼ í•  í•„ìš”ì„±ë„ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë‹¤ë¥¸ í™˜ê²½ì„¤ì •ì„ ìœ„í•´ ë§¤ë²ˆ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ìš´ì˜í™˜ê²½ì„ ì •ì ì½”ë“œë‚˜, íŒŒì¼ë¡œ ê´€ë¦¬í•˜ì—¬ ìˆ˜ì •í›„ ë‹¤ì‹œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ì„œ ë°°í¬í•˜ëŠ” ì‘ì—…ì€ ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ê·¸ë•Œë§ˆë‹¤ ë„ì»¤ ë¹Œë“œë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ë°°í¬í•´ì•¼ í•˜ëŠ” ì‘ì—…ë“¤ì´ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•œë‹¤ë©´ ìƒë‹¹íˆ ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚­ë¹„í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì„œë¹„ìŠ¤ì— í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ ê°’ì„ ì»¨í…Œì´ë„ˆì™€ ë¶„ë¦¬í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. Config Mapì„ Dev, Staging, Prodcuntion ë³„ ê´€ë¦¬/ì„¤ì •í•˜ì—¬ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì„œë¹„ìŠ¤ ê°œë°œ/ìš´ì˜ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![Config Map êµ¬ì¡°](./images/install-guide/configmap.png)

##### Secret
Secretì€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ìš” ê¸°ë°€ì •ë³´(ID, íŒ¨ìŠ¤ì›Œë“œ, í† í°ì •ë³´ ë“±..)ì„ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ í™œìš©í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ë°€ ì •ë³´ë“¤ì€
ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰í• ë•Œ ë˜ëŠ” ì‹¤í–‰ì¤‘ì— í•„ìš”í• ë•Œë§ˆë‹¤ ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ì£¼ìš” ê¸°ë°€ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í• ë•Œ ì•ˆì „í•œ ì €ì¥ì†Œë¡œì„œì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

##### Dashboard
Kubernetes [ëŒ€ì‹œë³´ë“œ](https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/)ë¥¼ ì´ìš©í•˜ë ¤ë©´, Minikubeë¥¼ ì‹¤í–‰í•œ í›„ minikube ì—ì„œ ì œê³µí•˜ëŠ” dashboard addon ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ì—¬ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.

1. minikube ì‹¤í–‰
```
$ minikube start
ğŸ˜„  minikube v1.1.1 on darwin (amd64)
âš ï¸  Ignoring --vm-driver=virtualbox, as the existing "minikube" VM was created using the hyperkit driver.
âš ï¸  To switch drivers, you may create a new VM using `minikube start -p <name> --vm-driver=virtualbox`
âš ï¸  Alternatively, you may delete the existing VM using `minikube delete -p minikube`

ğŸ”„  Restarting existing hyperkit VM for "minikube" ...
âŒ›  Waiting for SSH access ...
^[[B^[[B^[[B^[[BğŸ³  Configuring environment for Kubernetes v1.14.3 on Docker 18.09.6
ğŸ”„  Relaunching Kubernetes v1.14.3 using kubeadm ...
âŒ›  Verifying: apiserver proxy etcd scheduler controller dns
ğŸ„  Done! kubectl is now configured to use "minikube"
```

2. minikube dashboard addon ë¦¬ìŠ¤íŠ¸ í™•ì¸
minikube addons list ëª…ë ¹ì–´ë¥¼ í†µí•´ mininkube ì—ì„œ ì œê³µí•˜ëŠ” addon ì •ë³´ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ì—ì„  dashboard addon í™•ì¸ì´ ê°€ëŠ¥í•˜ê³ , ë§Œì•½ ë¹„í™œì„±í™” ë˜ì–´ìˆë‹¤ë©´ minikube addons enable dashboard ëª…ë ¹ì–´ë¥¼ í†µí•´ í™œì„±í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

- kubernetes addon ë¦¬ìŠ¤íŠ¸ í™•ì¸
```
$ minikube addons list
- addon-manager: enabled
- dashboard: enabled
- default-storageclass: enabled
- efk: disabled
- freshpod: disabled
- gvisor: disabled
- heapster: disabled
- ingress: disabled
- logviewer: disabled
- metrics-server: disabled
- nvidia-driver-installer: disabled
- nvidia-gpu-device-plugin: disabled
- registry: disabled
- registry-creds: disabled
- storage-provisioner: enabled
- storage-provisioner-gluster: disabled

$ minikube dashboard
ğŸ”Œ  Enabling dashboard ...
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
ğŸ‰  Opening http://127.0.0.1:57975/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ in your default browser...
```

- kubernetes dashboard addon í™œì„±í™”
```
$ minikube addons enable dashboard
âœ…  dashboard was successfully enabled
```

3. dashboard ì‹¤í–‰
minikube dashboard ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë¸Œë¼ìš°ì €ì— ìë™ìœ¼ë¡œ ëŒ€ë¹„ë³´ë“œ í˜ì´ì§€ê°€ ì—´ë¦¬ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì—´ë¦¬ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‹¤í–‰í›„ í•˜ë‹¨ì— ë‚˜íƒ€ë‚˜ëŠ” Opening http: http://127.0.0.1:49703/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤. (Opeing http url ì£¼ì†ŒëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

```
$ minikube dashbarod
ğŸ”Œ  Enabling dashboard ...
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
ğŸ‰  Opening http://127.0.0.1:49703/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/ in your default browser...
```

![bashboard](./images/install-guide/dashboard.png)

##### Container Runtime
minikube ì—ì„œ ì§€ì›í•˜ëŠ” ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
ì´ ì±…ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” Docker Container Runtime ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- [Docker](https://www.docker.com/)
- [rkt](https://github.com/rkt/rkt)
- [CRI-O](https://github.com/cri-o/cri-o)
- [containerd](https://github.com/containerd/containerd)

##### CNI (Container Network Interface)
CNIëŠ” ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ í™˜ê²½(Docker, rkt, CRI-O, containerd)ì—ì„œ ì»¨í…Œì´ë„ˆ ê°„ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ìœ„ìœˆ ìŠ¤íŒ©ì„ ì •ì˜í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì€ CNI ìŠ¤íŒ©ì— ë”°ë¼ ë„¤íŠ¸ì›Œí¬ ì„¤ì • íŒŒì¼ì„ Conf(ì„¤ì •íŒŒì¼) íŒŒì¼ì— ì •ì˜í•œ í›„, CNI Pluginì„ ì‹¤í–‰í•˜ë©´ ê°„ë‹¨í•œ ì„¤ì • ë§Œìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ë¥¼ ì†ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê¸°ë³¸ì ìœ¼ë¡œ IstioëŠ” Merhì— ë°°í¬ëœ podsì— initContainer, istio-initì„ ì ìš©í•©ë‹ˆë‹¤. istio-init ì»¨í…Œì´ë„ˆëŠ” Istio Sidecar Proxyë¡œë¶€í„° pod ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë¦¬ë‹¤ì´ë ‰ì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì¢€ë” ì„¸ë¶„í™”ëœ ì‚¬ìš©ìë³„ RBAC ê¶Œí•œì„ í†µí•œ Traffic Redirectionì´ í•„ìš”í•œ ê²½ìš° [CNI-plugin](https://istio.io/docs/setup/kubernetes/additional-setup/cni/) ì„ ë³„ë„ ì„¤ì¹˜í•˜ì—¬ istio-init ëŒ€ì²´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

![CNI](./images/install-guide/CNI.png)

##### Ingress
IngressëŠ” í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ë‚´ë¶€ë¡œ ì ‘ê·¼í•˜ëŠ” íŠ¸ë˜í”½ì„ ì œì–´í•˜ê¸° ìœ„í•œ ê·œì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ê·œì¹™ë“¤ì„ í´ëŸ¬ìŠ¤í„°ì— ì ìš©í•˜ì—¬ ë™ì‘í•˜ë„ë¡ í•˜ëŠ” ì£¼ì²´ê°€ Ingress Controller ì…ë‹ˆë‹¤.
Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆì˜ ì§‘í•œì¸ pods í˜•íƒœë¡œ ì œê³µí•˜ê³  ìˆê³ , ì´ëŸ¬í•œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì€ í•˜ë‚˜ì˜ URLë¡œ í‘œí˜„ë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì‚¬ìš©ìì™€ ê´€ë ¨ëœ ì„œë¹„ìŠ¤ëŠ” /users, ì œí’ˆê³¼ ê´€ë ¨ëœ ì„œë¹„ìŠ¤ëŠ” /products ì™€ ê°™ì€ URL í˜•íƒœë¡œ í‘œí˜„ì´ ë©ë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ ìœ ì…ë˜ëŠ” ì´ëŸ¬í•œ í˜•íƒœì˜ URLì„ í´ëŸ¬ìŠ¤í„°ë‚´ Service/Pods ë¡œ ë¼ìš°íŒ…ì´ í•„ìš”í•˜ê³ , ì´ë¥¼ ìœ„í•´ L7 ë¡œë“œë°¸ëŸ°ì„œì—ì„œ URL ê¸°ë°˜ì˜ ê°€ë²¼ìš´ ë¼ìš°íŒ… ê¸°ëŠ¥ì„ Ingress ë¥¼ í†µí•´ì„œ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.

ê°œë…ì„ ë„ì‹í™”í•´ë³´ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ Kubernetes í´ëŸ¬ìŠ¤í„°ë‚´ ëª‡ê°œ ì´ìƒì˜ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆëŠ” í™˜ê²½ì—ì„œ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ ì‚¬ìš©ìì˜ ìš”ì²­ì„ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ podsë¡œ ì–´ë–»ê²Œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆëŠ”ì§€ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ë“¤ì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ Tmap(www.tmap.co.kr)ê³¼ SKT Deveoloper (developers.sktelecom.com) í•˜ë‚˜ì˜ URLë¡œ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Tmap ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ í•„ìš”í•œ ê° ëª¨ë“ˆ(ì¸ì¦, Map API ë“±..)ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í˜•íƒœë¡œ ê¸°ëŠ¥ì„ ì„¸ë¶„í™”í•˜ì—¬ Pod í˜•íƒœë¡œ ë°°í¬í•˜ì—¬ ì„œë¹„ìŠ¤ì™€ ë…¼ë¦¬ì ìœ¼ë¡œ ë°”ì¸ë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´í›„ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ìš”ì²­ë˜ëŠ” Tmap ê´€ë ¨ URL ë©”ì‹œì§€ëŠ” ingressë¥¼ í†µí•´ í•´ë‹¹ Service(www.tmap.co.kr)ì˜ Podë¡œ ë¼ìš°íŒ… ë©ë‹ˆë‹¤.

![Ingress](./images/install-guide/ingress.png)

IngressëŠ” ì—¬ëŸ¬ êµ¬í˜„ì œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
í´ë¼ìš°ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë³„ë‹¤ë¥¸ ì„¤ì • ì—†ì´ í´ë¼ìš°ë“œì‚¬ì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ Ingress ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , On-Premise í™˜ê²½ì—ì„œ ì§ì ‘ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì§ì ‘ ì˜¤í”ˆì†ŒìŠ¤ nginx-ingressë¥¼ ì´ìš©í•˜ì—¬ êµ¬ì¶• ê°€ëŠ¥í•©ë‹ˆë‹¤. ìœ„ ë°©ë²• ì™¸ì— Istio Ingress/Egressë¥¼ ì´ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ (ingress)ê³¼ ì™¸ë¶€ë¡œ ë‚˜ê°€ëŠ” íŠ¸ë˜í”½ (egress)ì„ ì‰½ê²Œ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì„¤ëª…ì€ Xì¥ì—ì„œ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.

í´ë¼ìš°ë“œ Ingress Controller
- [GCE(Google Cloud Engine) Kubernetes Ingress](https://cloud.google.com/kubernetes-engine/docs/tutorials/http-balancer?hl=ko)
- [Azure AKS(Azure Kubernetes Service) Ingress Controller](https://docs.microsoft.com/ko-kr/azure/aks/ingress-basic)
- [AWS Kubernetes Ingress with ALB Ingress Controller](https://aws.amazon.com/ko/blogs/opensource/kubernetes-ingress-aws-alb-ingress-controller/)

ì˜¤í”ˆì†ŒìŠ¤ Ingress Controller
- [Ingres-nginx](https://kubernetes.io/docs/concepts/services-networking/ingress/)

Istio Ingress & Egress
 - [Istio Ingress](https://istio.io/docs/tasks/traffic-management/ingress/)
 - [Istio Egress](https://istio.io/docs/tasks/traffic-management/egress/)
